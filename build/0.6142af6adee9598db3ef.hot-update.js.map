{"version":3,"file":"0.6142af6adee9598db3ef.hot-update.js","sources":["webpack:///src/server.js"],"sourcesContent":["import App from './App';\nimport React from 'react';\n//Server\nimport express from 'express';\nimport mongoose from 'mongoose';\nimport cors from 'cors';\nimport bodyParser from 'body-parser';\nimport cookieParser from 'cookie-parser';\nimport router from './server/api/routes/index.routes';\n//SSR\nimport theme from './theme';\nimport jss from './styles';\nimport { SheetsRegistry } from 'react-jss';\nimport { JssProvider } from 'react-jss';\nimport { MuiThemeProvider } from 'material-ui/styles';\nimport { renderToString } from 'react-dom/server';\n\nimport config from './config';\n\n\n// Set native promises as mongoose promise\nmongoose.Promise = global.Promise;\n\n// MongoDB Connection\nmongoose.connect(config.mongoURL, (error) => {\n  if (error) {\n    console.error('Please make sure Mongodb is installed and running!'); // eslint-disable-line no-console\n    throw error;\n  }\n});\n\nconst assets = require(process.env.RAZZLE_ASSETS_MANIFEST);\n\nconst server = express();\n\nserver\n  .disable('x-powered-by')\n  .use(cors({ origin: true }))\n  .use(bodyParser.json())\n  .use(bodyParser.urlencoded({extended: true}))\n  .use(cookieParser())\n  .use('/api', router)\n  .use(express.static(process.env.RAZZLE_PUBLIC_DIR))\n  .get('/*', (req, res) => {\n    // This is needed in order to deduplicate the injection of CSS in the page.\n    const sheetsManager = new WeakMap();\n    // This is needed in order to inject the critical CSS.\n    const sheetsRegistry = new SheetsRegistry();\n    const markup = renderToString(\n      <JssProvider registry={sheetsRegistry} jss={jss}>\n        <MuiThemeProvider sheetsManager={sheetsManager} theme={theme}>\n          <App />\n        </MuiThemeProvider>\n      </JssProvider>\n    );\n    const css = sheetsRegistry.toString();\n    res.send(\n      `<!doctype html>\n    <html lang=\"fr\">\n    <head>\n        <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n        <meta charSet='utf-8' />\n        <title>Marvel Test</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n        <link rel=\"stylesheet\" href=\"//fonts.googleapis.com/css?family=Roboto:300,400,500\">\n        <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Icons\">\n        ${assets.client.css\n          ? `<link rel=\"stylesheet\" href=\"${assets.client.css}\">`\n          : ''}\n        ${css ? `<style id='jss-ssr'>${css}</style>` : ''}\n         ${process.env.NODE_ENV === 'production'\n           ? `<script src=\"${assets.client.js}\" defer></script>`\n           : `<script src=\"${assets.client.js}\" defer crossorigin></script>`}\n    </head>\n    <body>\n        <div id=\"root\">${markup}</div>\n    </body>\n</html>`\n    );\n  });\n\nexport default server;\n\n\n\n// WEBPACK FOOTER //\n// src/server.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AADA;AAMA;AACA;AAuBA;AACA;AACA;;;;A","sourceRoot":""}